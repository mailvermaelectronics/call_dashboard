<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Secure Login - Call Dashboard</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

<style>
  /* Global Reset and Typography */
  body{
    font-family:'Inter', system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif;
    background:#eef1f6;
    display:flex;
    align-items:center;
    justify-content:center;
    min-height:100vh;
    margin:0;
  }
  
  /* Login Container Box */
  .box{
    background:#ffffff;
    padding:40px;
    width:100%;
    max-width:380px;
    border-radius:16px;
    box-shadow:0 10px 30px rgba(0,0,0,0.08);
    transition:transform 0.3s ease;
  }

  /* Logo Styling (Updated for PNG/Image) */
  .logo-container {
    text-align: center;
    margin-bottom: 25px;
  }
  .logo {
    /* Logo image styling */
    width: auto; /* Adjust width as needed, maintaining aspect ratio */
    max-height: 80px; /* Set a max height */
  }

  /* Headings */
  h2{
    text-align:center;
    color:#1f2937;
    margin-bottom: 20px;
    font-weight: 700;
    font-size: 24px;
  }
  
  /* Input Fields */
  input{
    width:calc(100% - 20px);
    padding:12px 10px;
    margin-top:15px;
    border-radius:10px;
    border:1px solid #e5e7eb;
    transition:border-color 0.3s, box-shadow 0.3s;
    font-size:16px;
    color:#374151;
  }
  input:focus{
    border-color:#2563eb;
    outline:none;
    box-shadow:0 0 0 3px rgba(37, 99, 235, 0.2);
  }
  
  /* Button Styling */
  button{
    width:100%;
    padding:14px;
    margin-top:25px;
    border:0;
    border-radius:10px;
    background:#2563eb;
    color:#fff;
    font-weight:600;
    cursor:pointer;
    font-size:16px;
    transition:background-color 0.3s, box-shadow 0.3s;
  }
  button:hover{
    background:#1d4ed8;
    box-shadow:0 4px 15px rgba(37, 99, 235, 0.3);
  }
  
  /* Muted Text */
  .muted{
    font-size:14px;
    color:#6b7280;
    margin-top:15px;
    text-align:center;
  }
  
  /* Message Area */
  #msg{
    margin-top:15px;
    font-size:15px;
    text-align:center;
    padding:10px;
    border-radius:8px;
  }
</style>

</head>
<body>
<div class="box">

  <div class="logo-container">
    <img src="res/logo.png" alt="Company Logo" class="logo">
  </div>

  <h2>Dashboard Login</h2>

  <div id="loginBox">
    <input id="username" placeholder="Username" autocomplete="username">
    <input id="password" type="password" placeholder="Password" autocomplete="current-password">
    <button onclick="login()">Secure Login</button>
    <div class="muted">Enter correct username & password to access the secure dashboard.</div>
  </div>

  <div id="msg"></div>

</div>

<script>
// USER DATA (same as before)
const USERS = {
  "admin": {
     // password = admin123
     passwordHash: "9667a43bca5f7472d3e1b25c1cf6f831960c9bdd5eaaf19a99d426f9739b29e1",
  }
};

// SHA-256 hash
async function sha256hex(str){
  const buf = await crypto.subtle.digest("SHA-256", new TextEncoder().encode(str));
  return Array.from(new Uint8Array(buf)).map(b=>b.toString(16).padStart(2,"0")).join("");
}

// show message
function msg(text, bad=false){
  const m = document.getElementById("msg");
  m.style.color = bad ? "#991b1b" : "#065f46"; 
  m.style.backgroundColor = bad ? "#fee2e2" : "#d1fae5";
  m.innerText = text;
}

// login function (NO OTP)
async function login(){
  msg("");

  const u = document.getElementById("username").value.trim();
  const p = document.getElementById("password").value;

  // Disable button during process
  const loginButton = document.querySelector('button');
  loginButton.disabled = true;

  if(!u || !p){ 
    msg("Please enter both username and password.", true); 
    loginButton.disabled = false;
    return; 
  }

  const user = USERS[u];
  if(!user){ 
    msg("Invalid credentials. Please check your details.", true); 
    loginButton.disabled = false;
    return; 
  }

  try {
    const hash = await sha256hex(p);
    if(hash !== user.passwordHash){ 
      msg("Invalid credentials. Please check your details.", true); 
      loginButton.disabled = false;
      return;
    }
  } catch (error) {
    // Handle potential hashing errors
    msg("An error occurred during authentication.", true);
    loginButton.disabled = false;
    return;
  }

  // SUCCESS
  msg("Login successful! Redirecting to dashboard...", false);

  localStorage.setItem("auth", "1");

  setTimeout(()=>{
    window.location.href = "dashboard.html";
  }, 600);
}
</script>

</body>
</html>
